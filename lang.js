// 多语言配置文件
export const translations = {
  en: {
    title: "Brain Atlas Gallery",
    description: "It's an initial job for neuroimaging analysis.",
    contact: "Contact me if the work can help you in any way.",
    email: "Email: chuncheng.zhang@ia.ac.cn",
    selectAtlas: "Select atlas",
    atlasColor: "Atlas color",
    options: "Options",
    showHelpers: "ShowHelpers",
    animation: "Animation",
    exploreMore: "Explore more",
    keyword: "Keyword",
    pubmed: "Pubmed",
    radioPaedia: "Radio Paedia",
    redrawButton: "Redraw",
    searchAtlas: "Search atlas",
    meshes: "Meshes",
    brain: "Brain",
    cube: "Cube",
    lights: "Lights",
    floorGrid: "Floor grid",
    sceneCameraRender: "Scene & Camera & Render",
    meshModels: "Mesh models",
    toolbox: "Toolbox",
    requirements: "Requirements",
    resources: "Resources",
    // 大脑区域名称（英文）
    brainRegions: {
      "Frontal Pole L": "Frontal Pole L",
      "Frontal Pole R": "Frontal Pole R",
      "Insular Cortex L": "Insular Cortex L",
      "Insular Cortex R": "Insular Cortex R",
      "Superior Frontal Gyrus L": "Superior Frontal Gyrus L",
      "Superior Frontal Gyrus R": "Superior Frontal Gyrus R",
      "Middle Frontal Gyrus L": "Middle Frontal Gyrus L",
      "Middle Frontal Gyrus R": "Middle Frontal Gyrus R",
      "Inferior Frontal Gyrus, pars triangularis L": "Inferior Frontal Gyrus, pars triangularis L",
      "Inferior Frontal Gyrus, pars triangularis R": "Inferior Frontal Gyrus, pars triangularis R",
      "Inferior Frontal Gyrus, pars opercularis L": "Inferior Frontal Gyrus, pars opercularis L",
      "Inferior Frontal Gyrus, pars opercularis R": "Inferior Frontal Gyrus, pars opercularis R",
      "Precentral Gyrus L": "Precentral Gyrus L",
      "Precentral Gyrus R": "Precentral Gyrus R",
      "Temporal Pole L": "Temporal Pole L",
      "Temporal Pole R": "Temporal Pole R",
      "Superior Temporal Gyrus, anterior division L": "Superior Temporal Gyrus, anterior division L",
      "Superior Temporal Gyrus, anterior division R": "Superior Temporal Gyrus, anterior division R",
      "Superior Temporal Gyrus, posterior division L": "Superior Temporal Gyrus, posterior division L",
      "Superior Temporal Gyrus, posterior division R": "Superior Temporal Gyrus, posterior division R",
      "Middle Temporal Gyrus, anterior division L": "Middle Temporal Gyrus, anterior division L",
      "Middle Temporal Gyrus, anterior division R": "Middle Temporal Gyrus, anterior division R",
      "Middle Temporal Gyrus, posterior division L": "Middle Temporal Gyrus, posterior division L",
      "Middle Temporal Gyrus, posterior division R": "Middle Temporal Gyrus, posterior division R",
      "Middle Temporal Gyrus, temporooccipital part L": "Middle Temporal Gyrus, temporooccipital part L",
      "Middle Temporal Gyrus, temporooccipital part R": "Middle Temporal Gyrus, temporooccipital part R",
      "Inferior Temporal Gyrus, anterior division L": "Inferior Temporal Gyrus, anterior division L",
      "Inferior Temporal Gyrus, anterior division R": "Inferior Temporal Gyrus, anterior division R",
      "Inferior Temporal Gyrus, posterior division L": "Inferior Temporal Gyrus, posterior division L",
      "Inferior Temporal Gyrus, posterior division R": "Inferior Temporal Gyrus, posterior division R",
      "Inferior Temporal Gyrus, temporooccipital part L": "Inferior Temporal Gyrus, temporooccipital part L",
      "Inferior Temporal Gyrus, temporooccipital part R": "Inferior Temporal Gyrus, temporooccipital part R",
      "Postcentral Gyrus L": "Postcentral Gyrus L",
      "Postcentral Gyrus R": "Postcentral Gyrus R",
      "Superior Parietal Lobule L": "Superior Parietal Lobule L",
      "Superior Parietal Lobule R": "Superior Parietal Lobule R",
      "Supramarginal Gyrus, anterior division L": "Supramarginal Gyrus, anterior division L",
      "Supramarginal Gyrus, anterior division R": "Supramarginal Gyrus, anterior division R",
      "Supramarginal Gyrus, posterior division L": "Supramarginal Gyrus, posterior division L",
      "Supramarginal Gyrus, posterior division R": "Supramarginal Gyrus, posterior division R",
      "Angular Gyrus L": "Angular Gyrus L",
      "Angular Gyrus R": "Angular Gyrus R",
      "Lateral Occipital Cortex, superior division L": "Lateral Occipital Cortex, superior division L",
      "Lateral Occipital Cortex, superior division R": "Lateral Occipital Cortex, superior division R",
      "Lateral Occipital Cortex, inferior division L": "Lateral Occipital Cortex, inferior division L",
      "Lateral Occipital Cortex, inferior division R": "Lateral Occipital Cortex, inferior division R",
      "Intracalcarine Cortex L": "Intracalcarine Cortex L",
      "Intracalcarine Cortex R": "Intracalcarine Cortex R",
      "Frontal Medial Cortex L": "Frontal Medial Cortex L",
      "Frontal Medial Cortex R": "Frontal Medial Cortex R",
      "Juxtapositional Lobule Cortex (formerly Supplementary Motor Cortex) L": "Juxtapositional Lobule Cortex (formerly Supplementary Motor Cortex) L",
      "Juxtapositional Lobule Cortex (formerly Supplementary Motor Cortex) R": "Juxtapositional Lobule Cortex (formerly Supplementary Motor Cortex) R",
      "Subcallosal Cortex L": "Subcallosal Cortex L",
      "Subcallosal Cortex R": "Subcallosal Cortex R",
      "Paracingulate Gyrus L": "Paracingulate Gyrus L",
      "Paracingulate Gyrus R": "Paracingulate Gyrus R",
      "Cingulate Gyrus, anterior division L": "Cingulate Gyrus, anterior division L",
      "Cingulate Gyrus, anterior division R": "Cingulate Gyrus, anterior division R",
      "Cingulate Gyrus, posterior division L": "Cingulate Gyrus, posterior division L",
      "Cingulate Gyrus, posterior division R": "Cingulate Gyrus, posterior division R",
      "Precuneous Cortex L": "Precuneous Cortex L",
      "Precuneous Cortex R": "Precuneous Cortex R",
      "Cuneal Cortex L": "Cuneal Cortex L",
      "Cuneal Cortex R": "Cuneal Cortex R",
      "Frontal Orbital Cortex L": "Frontal Orbital Cortex L",
      "Frontal Orbital Cortex R": "Frontal Orbital Cortex R",
      "Parahippocampal Gyrus, anterior division L": "Parahippocampal Gyrus, anterior division L",
      "Parahippocampal Gyrus, anterior division R": "Parahippocampal Gyrus, anterior division R",
      "Parahippocampal Gyrus, posterior division L": "Parahippocampal Gyrus, posterior division L",
      "Parahippocampal Gyrus, posterior division R": "Parahippocampal Gyrus, posterior division R",
      "Lingual Gyrus L": "Lingual Gyrus L",
      "Lingual Gyrus R": "Lingual Gyrus R",
      "Temporal Fusiform Cortex, anterior division L": "Temporal Fusiform Cortex, anterior division L",
      "Temporal Fusiform Cortex, anterior division R": "Temporal Fusiform Cortex, anterior division R",
      "Temporal Fusiform Cortex, posterior division L": "Temporal Fusiform Cortex, posterior division L",
      "Temporal Fusiform Cortex, posterior division R": "Temporal Fusiform Cortex, posterior division R",
      "Temporal Occipital Fusiform Cortex L": "Temporal Occipital Fusiform Cortex L",
      "Temporal Occipital Fusiform Cortex R": "Temporal Occipital Fusiform Cortex R",
      "Occipital Fusiform Gyrus L": "Occipital Fusiform Gyrus L",
      "Occipital Fusiform Gyrus R": "Occipital Fusiform Gyrus R",
      "Frontal Operculum Cortex L": "Frontal Operculum Cortex L",
      "Frontal Operculum Cortex R": "Frontal Operculum Cortex R",
      "Central Opercular Cortex L": "Central Opercular Cortex L",
      "Central Opercular Cortex R": "Central Opercular Cortex R",
      "Parietal Operculum Cortex L": "Parietal Operculum Cortex L",
      "Parietal Operculum Cortex R": "Parietal Operculum Cortex R",
      "Planum Polare L": "Planum Polare L",
      "Planum Polare R": "Planum Polare R",
      "Heschl's Gyrus (includes H1 and H2) L": "Heschl's Gyrus (includes H1 and H2) L",
      "Heschl's Gyrus (includes H1 and H2) R": "Heschl's Gyrus (includes H1 and H2) R",
      "Planum Temporale L": "Planum Temporale L",
      "Planum Temporale R": "Planum Temporale R",
      "Supracalcarine Cortex L": "Supracalcarine Cortex L",
      "Supracalcarine Cortex R": "Supracalcarine Cortex R",
      "Occipital Pole L": "Occipital Pole L",
      "Occipital Pole R": "Occipital Pole R"
    }
  },
  zh: {
    title: "脑图谱展示库",
    description: "这是神经影像分析的初步工作。",
    contact: "如果这项工作对您有任何帮助，请联系我。",
    email: "邮箱: chuncheng.zhang@ia.ac.cn",
    selectAtlas: "选择图谱",
    atlasColor: "图谱颜色",
    options: "选项",
    showHelpers: "显示辅助线",
    animation: "动画",
    exploreMore: "探索更多",
    keyword: "关键词",
    pubmed: "医学文献库",
    radioPaedia: "放射学数据库",
    redrawButton: "重新绘制",
    searchAtlas: "搜索图谱",
    meshes: "网格模型",
    brain: "大脑",
    cube: "立方体",
    lights: "灯光",
    floorGrid: "地面网格",
    sceneCameraRender: "场景、相机和渲染",
    meshModels: "网格模型",
    toolbox: "工具箱",
    requirements: "依赖项",
    resources: "资源",
    // 大脑区域名称（中文）
    brainRegions: {
      "Frontal Pole L": "左额极",
      "Frontal Pole R": "右额极",
      "Insular Cortex L": "左岛叶皮层",
      "Insular Cortex R": "右岛叶皮层",
      "Superior Frontal Gyrus L": "左额上回",
      "Superior Frontal Gyrus R": "右额上回",
      "Middle Frontal Gyrus L": "左额中回",
      "Middle Frontal Gyrus R": "右额中回",
      "Inferior Frontal Gyrus, pars triangularis L": "左额下回三角部",
      "Inferior Frontal Gyrus, pars triangularis R": "右额下回三角部",
      "Inferior Frontal Gyrus, pars opercularis L": "左额下回岛盖部",
      "Inferior Frontal Gyrus, pars opercularis R": "右额下回岛盖部",
      "Precentral Gyrus L": "左中央前回",
      "Precentral Gyrus R": "右中央前回",
      "Temporal Pole L": "左颞极",
      "Temporal Pole R": "右颞极",
      "Superior Temporal Gyrus, anterior division L": "左颞上回前部",
      "Superior Temporal Gyrus, anterior division R": "右颞上回前部",
      "Superior Temporal Gyrus, posterior division L": "左颞上回后部",
      "Superior Temporal Gyrus, posterior division R": "右颞上回后部",
      "Middle Temporal Gyrus, anterior division L": "左颞中回前部",
      "Middle Temporal Gyrus, anterior division R": "右颞中回前部",
      "Middle Temporal Gyrus, posterior division L": "左颞中回后部",
      "Middle Temporal Gyrus, posterior division R": "右颞中回后部",
      "Middle Temporal Gyrus, temporooccipital part L": "左颞中回颞枕部",
      "Middle Temporal Gyrus, temporooccipital part R": "右颞中回颞枕部",
      "Inferior Temporal Gyrus, anterior division L": "左颞下回前部",
      "Inferior Temporal Gyrus, anterior division R": "右颞下回前部",
      "Inferior Temporal Gyrus, posterior division L": "左颞下回后部",
      "Inferior Temporal Gyrus, posterior division R": "右颞下回后部",
      "Inferior Temporal Gyrus, temporooccipital part L": "左颞下回颞枕部",
      "Inferior Temporal Gyrus, temporooccipital part R": "右颞下回颞枕部",
      "Postcentral Gyrus L": "左中央后回",
      "Postcentral Gyrus R": "右中央后回",
      "Superior Parietal Lobule L": "左顶上小叶",
      "Superior Parietal Lobule R": "右顶上小叶",
      "Supramarginal Gyrus, anterior division L": "左缘上回前部",
      "Supramarginal Gyrus, anterior division R": "右缘上回前部",
      "Supramarginal Gyrus, posterior division L": "左缘上回后部",
      "Supramarginal Gyrus, posterior division R": "右缘上回后部",
      "Angular Gyrus L": "左角回",
      "Angular Gyrus R": "右角回",
      "Lateral Occipital Cortex, superior division L": "左外侧枕叶皮层上部",
      "Lateral Occipital Cortex, superior division R": "右外侧枕叶皮层上部",
      "Lateral Occipital Cortex, inferior division L": "左外侧枕叶皮层下部",
      "Lateral Occipital Cortex, inferior division R": "右外侧枕叶皮层下部",
      "Intracalcarine Cortex L": "左距状裂内皮层",
      "Intracalcarine Cortex R": "右距状裂内皮层",
      "Frontal Medial Cortex L": "左额内侧皮层",
      "Frontal Medial Cortex R": "右额内侧皮层",
      "Juxtapositional Lobule Cortex (formerly Supplementary Motor Cortex) L": "左邻近小叶皮层（前辅助运动区）",
      "Juxtapositional Lobule Cortex (formerly Supplementary Motor Cortex) R": "右邻近小叶皮层（前辅助运动区）",
      "Subcallosal Cortex L": "左胼胝体下回皮层",
      "Subcallosal Cortex R": "右胼胝体下回皮层",
      "Paracingulate Gyrus L": "左旁扣带回",
      "Paracingulate Gyrus R": "右旁扣带回",
      "Cingulate Gyrus, anterior division L": "左扣带回前部",
      "Cingulate Gyrus, anterior division R": "右扣带回前部",
      "Cingulate Gyrus, posterior division L": "左扣带回后部",
      "Cingulate Gyrus, posterior division R": "右扣带回后部",
      "Precuneous Cortex L": "左楔前叶皮层",
      "Precuneous Cortex R": "右楔前叶皮层",
      "Cuneal Cortex L": "左楔叶皮层",
      "Cuneal Cortex R": "右楔叶皮层",
      "Frontal Orbital Cortex L": "左额眶皮层",
      "Frontal Orbital Cortex R": "右额眶皮层",
      "Parahippocampal Gyrus, anterior division L": "左海马旁回前部",
      "Parahippocampal Gyrus, anterior division R": "右海马旁回前部",
      "Parahippocampal Gyrus, posterior division L": "左海马旁回后部",
      "Parahippocampal Gyrus, posterior division R": "右海马旁回后部",
      "Lingual Gyrus L": "左舌回",
      "Lingual Gyrus R": "右舌回",
      "Temporal Fusiform Cortex, anterior division L": "左颞梭状回前部",
      "Temporal Fusiform Cortex, anterior division R": "右颞梭状回前部",
      "Temporal Fusiform Cortex, posterior division L": "左颞梭状回后部",
      "Temporal Fusiform Cortex, posterior division R": "右颞梭状回后部",
      "Temporal Occipital Fusiform Cortex L": "左颞枕梭状皮层",
      "Temporal Occipital Fusiform Cortex R": "右颞枕梭状皮层",
      "Occipital Fusiform Gyrus L": "左枕梭状回",
      "Occipital Fusiform Gyrus R": "右枕梭状回",
      "Frontal Operculum Cortex L": "左额岛盖皮层",
      "Frontal Operculum Cortex R": "右额岛盖皮层",
      "Central Opercular Cortex L": "左中央岛盖皮层",
      "Central Opercular Cortex R": "右中央岛盖皮层",
      "Parietal Operculum Cortex L": "左顶岛盖皮层",
      "Parietal Operculum Cortex R": "右顶岛盖皮层",
      "Planum Polare L": "左极平面",
      "Planum Polare R": "右极平面",
      "Heschl's Gyrus (includes H1 and H2) L": "左颞横回（包括H1和H2）",
      "Heschl's Gyrus (includes H1 and H2) R": "右颞横回（包括H1和H2）",
      "Planum Temporale L": "左颞平面",
      "Planum Temporale R": "右颞平面",
      "Supracalcarine Cortex L": "左距状裂上皮层",
      "Supracalcarine Cortex R": "右距状裂上皮层",
      "Occipital Pole L": "左枕极",
      "Occipital Pole R": "右枕极"
    }
  }
};

// 获取当前语言，默认英语
export function getCurrentLanguage() {
  const savedLang = localStorage.getItem('brainAtlasLang');
  if (savedLang && translations[savedLang]) {
    return savedLang;
  }
  // 尝试根据浏览器语言设置自动选择
  const browserLang = navigator.language.split('-')[0];
  if (translations[browserLang]) {
    return browserLang;
  }
  return 'en';
}

// 设置当前语言
export function setCurrentLanguage(lang) {
  if (translations[lang]) {
    localStorage.setItem('brainAtlasLang', lang);
    return true;
  }
  return false;
}

// 获取翻译文本，支持嵌套键（例如：'brainRegions.RegionName'）
export function t(key, defaultValue = key) {
  const lang = getCurrentLanguage();
  const langTranslations = translations[lang];
  
  if (!langTranslations) return defaultValue;
  
  // 支持嵌套键访问
  if (key.includes('.')) {
    const keys = key.split('.');
    let value = langTranslations;
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        return defaultValue;
      }
    }
    
    return value;
  }
  
  return langTranslations[key] !== undefined ? langTranslations[key] : defaultValue;
}

// 获取大脑区域的翻译
export function translateBrainRegion(regionName) {
  return t(`brainRegions.${regionName}`, regionName);
}

// 创建语言切换器组件
export function createLanguageSwitcher(onChange) {
  const switcher = document.createElement('div');
  switcher.style.position = 'absolute';
  switcher.style.top = '10px';
  switcher.style.right = '10px';
  switcher.style.zIndex = '1000';
  switcher.style.padding = '5px';
  switcher.style.background = 'rgba(255, 255, 255, 0.8)';
  switcher.style.borderRadius = '5px';
  switcher.style.fontFamily = 'Arial, sans-serif';
  
  const label = document.createElement('span');
  label.textContent = 'Language / 语言: ';
  switcher.appendChild(label);
  
  const select = document.createElement('select');
  Object.keys(translations).forEach(lang => {
    const option = document.createElement('option');
    option.value = lang;
    option.textContent = lang === 'en' ? 'English' : '中文';
    option.selected = lang === getCurrentLanguage();
    select.appendChild(option);
  });
  
  select.onchange = () => {
    setCurrentLanguage(select.value);
    if (onChange) onChange(select.value);
    // 重新加载页面以应用更改
    location.reload();
  };
  
  switcher.appendChild(select);
  return switcher;
}